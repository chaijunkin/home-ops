# Security improvements for your HelmReleases
# Add these securityContext configurations to workloads that are missing them:

defaultSecurityContext: &defaultSecurityContext
  securityContext:
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: true
    capabilities: 
      drop: ["ALL"]
    seccompProfile:
      type: RuntimeDefault

defaultPodSecurityContext: &defaultPodSecurityContext
  securityContext:
    runAsNonRoot: true
    runAsUser: 65534
    runAsGroup: 65534
    fsGroup: 65534

# For media applications that need specific UIDs:
mediaSecurityContext: &mediaSecurityContext
  securityContext:
    runAsNonRoot: true
    runAsUser: 568
    runAsGroup: 568
    fsGroup: 568
    fsGroupChangePolicy: OnRootMismatch

# Example usage in HelmRelease:
# controllers:
#   main:
#     containers:
#       main:
#         <<: *defaultSecurityContext
#         # ... rest of container config
#     pod:
#       <<: *defaultPodSecurityContext
