defaultPodOptions:
  securityContext:
    runAsUser: 769
    runAsGroup: 769
    runAsNonRoot: true
controllers:
  bitwarden:
    containers:
      app:
        image:
          repository: ghcr.io/chaijunkin/bw
          tag: 2025.12.1@sha256:17e0cff610774f941e54b391194abf42a21848f23eb52225350411fcc4fb195e
        envFrom:
          - secretRef:
              name: bitwarden-cli
        securityContext:
          readOnlyRootFilesystem: true
        probes:
          liveness:
            enabled: true
            custom: true
            spec:
              periodSeconds: 120
              exec:
                command:
                  - sh
                  - -c
                  - /healthcheck.sh
              timeoutSeconds: 5
          readiness:
            enabled: false
          startup:
            enabled: false
        resources:
          requests:
            memory: 256Mi
            cpu: 100m
          limits:
            memory: 512Mi
service:
  app:
    controller: bitwarden
    ports:
      http:
        port: 8087
persistence:
  tmp:
    type: emptyDir
    globalMounts:
      - path: /tmp
