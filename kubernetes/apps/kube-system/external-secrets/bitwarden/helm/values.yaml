controllers:
  bitwarden:
    containers:
      app:
        image:
          repository: ghcr.io/chaijunkin/bw
          tag: 2025.8.0@sha256:3ff0ff4335996d083735f0320a8930c65ffc579496f7bb589fe38c93caffe173
        envFrom:
          - secretRef:
              name: bitwarden-cli
        securityContext:
          readOnlyRootFilesystem: true
        probes:
          liveness:
            enabled: true
            custom: true
            spec:
              periodSeconds: 120
              exec:
                command:
                  - sh
                  - -c
                  - /healthcheck.sh
              timeoutSeconds: 5
          readiness:
            enabled: false
          startup:
            enabled: false
        resources:
          requests:
            memory: 256Mi
            cpu: 100m
          limits:
            memory: 512Mi
service:
  app:
    controller: bitwarden
    ports:
      http:
        port: 8087
persistence:
  tmp:
    type: emptyDir
    globalMounts:
      - path: /tmp
